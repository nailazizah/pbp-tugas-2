<!doctype html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> My To Do List ☆</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>
<body>

<style>
    body{
        background: linear-gradient(to top, #FCFCFC 0%, #4D8EFF 100%);
    }

    .card {
        background: linear-gradient(to bottom, #F880E6 0%, #F9AEB6 100%);
        border-radius: 30px;
        box-shadow: 1px 1px 2px;
    }

    .card:hover{
        transform: scale(1.1);
        transition: transform .3s;
    }

    .container {
        display: flex;
    }

</style>

<!-- <div style="color: darkblue; text-align: center;">
    <h1>｡･:*:･ﾟ★,｡･:To Do List･:*:★,｡:･ﾟ☆</h1>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <button onclick="location.href='/todolist/addtodo'">Create New Task</button>
    <button><a href="{% url 'todolist:logout' %}">Logout</a></button>
</div> -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $.get("/todolist/json", function(data) {
            console.log(data)
            for (i = 0; i < data.length; i++) {
                $(".container").append(
                    `<div class="card" style="width: 18rem; text-align: center;">
                        <div class="card-body">
                            <h5 class="card-title">{${data[i].fields.title}}</h5>
                            <p class="card-text">{${data[i].fields.description}}</p>
                            <p class="card-text">{${data[i].fields.date}}</p>
{#                            {% if todo.is_finished %}#}
{#                                Task is Finished#}
{#                            {% else %}#}
{#                                Task is Not Finished#}
{#                            {% endif %}#}
{#                            <button><a href="{% url 'todolist:change_status' todo.id %}">Change Status</a></button>#}
{#                            <button><a href="{% url 'todolist:delete' todo.id %}">Delete Task</a></button>#}
                        </div>
                    </div>`)
                }
            });

        $("msg_txt").click(function(){
            console.log("do_something")
        $.post("/todolist/addtodo/", {
            title : $('#title').val(),
            description : $('#description').val()},
            function(result){
            $(".container").append(
                `<div class="card" style="width: 18rem; text-align: center;">
                        <div class="card-body">
                            <h5 class="card-title">{{result.fields.title}}</h5>
                            <p class="card-text">{{result.fields.description}}</p>
                            <p class="card-text">{{result.fields.date}}</p>
{#                            {% if result.fields.is_finished %}#}
{#                                Task is Finished#}
{#                            {% else %}#}
{#                                Task is Not Finished#}
{#                            {% endif %}#}
{#                            <button><a href="{% url 'todolist:change_status' result.fields.id %}">Change Status</a></button>#}
{#                            <button><a href="{% url 'todolist:delete' result.fields.id %}">Delete Task</a></button>#}

                        </div>
                    </div>`)
                    $('#title').val('')
                    $('#description').val('')
            })
        })
    });
</script>

<body>
    <h1>&#128171To Do List&#128218</h1>
    <h3>Hi {{user}}!&#128075</h3>
    <h2>Your To Do List</h2>
    <br>
    
    <!-- <table>
        <tr>
        <th>&#128197 Date</th>
        <th>&#128204 Title</th>
        <th>&#128196 Description</th>
        </tr> -->
    
    <div class="container">
    
    
    </div>
    <!-- </table> -->
    <br>
    <a href="{% url 'todolist:showtodo' %}"><button class="button-56" role="button">+ New Task</button></a>
    
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">Open modal for @mdo</button>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">New message</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">Title:</label>
                <input type="text" class="form-control" id="title" >
              </div>
              <div class="mb-3">
                <label for="message-text" class="col-form-label">Description:</label>
                <textarea class="form-control" id="description" ></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="create-btn" data-bs-dismiss="modal">Create Task</button>
          </div>
        </div>
      </div>
    </div>
    
    <br>
    <a href="{% url 'todolist:logout' %}"><button class="button-logout">Logout</button></a>
    </body>
    
    
{#<div class="container">#}
{#    <div class="row row-cols-1 row-cols-md-3 g-4">#}
{#    {% for todo in list_todo %}#}
{##}
{#        <div class="card" style="width: 18rem; text-align: center;">#}
{#            <div class="card-body">#}
{#                <h5 class="card-title">{{todo.title}}</h5>#}
{#                <p class="card-text">{{todo.description}}</p>#}
{#                <p class="card-text">{{todo.date}}</p>#}
{#                {% if todo.is_finished %}#}
{#                    Task is Finished#}
{#                {% else %}#}
{#                    Task is Not Finished#}
{#                {% endif %}#}
{#                <button><a href="{% url 'todolist:change_status' todo.id %}">Change Status</a></button>#}
{#                <button><a href="{% url 'todolist:delete' todo.id %}">Delete Task</a></button>#}
{##}
{#            </div>#}
{#        </div>#}
{#    {% endfor %}#}
{#    </div>#}
{#</div>#} -->






